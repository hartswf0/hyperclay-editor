<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silent Genome</title>
    <style>
        body, html { margin: 0; padding: 0; overflow: hidden; background-color: #000205; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="genome-canvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('genome-canvas');
            const ctx = canvas.getContext('2d');
            let width = canvas.width = window.innerWidth;
            let height = canvas.height = window.innerHeight;

            // --- DATA SOURCE ---
            const memoryData = [
                { type: 'link', weight: 0.8, intensity: 0.9, source: 'project_alpha' },
                { type: 'phrase', weight: 0.5, intensity: 0.6, source: 'project_alpha' },
                { type: 'image', weight: 1.0, intensity: 0.8, source: 'project_beta' },
                { type: 'code', weight: 0.7, intensity: 0.5, source: 'project_alpha' },
                { type: 'quote', weight: 0.6, intensity: 0.9, source: 'inspiration' },
                { type: 'gesture', weight: 0.3, intensity: 0.4, source: 'ui_concept' },
                { type: 'link', weight: 0.9, intensity: 0.7, source: 'project_beta' },
                { type: 'phrase', weight: 0.4, intensity: 0.8, source: 'inspiration' },
                { type: 'code', weight: 0.8, intensity: 0.6, source: 'project_beta' },
            ];

            const typeColors = {
                'link': 220, 'phrase': 180, 'image': 120,
                'code': 0, 'quote': 300, 'gesture': 60
            };

            let strands = [];
            let particles = [];
            let scrollY = 0;
            let mouse = { x: null, y: null, hoverGene: null };

            class Particle {
                constructor(x, y, hue) {
                    this.x = x;
                    this.y = y;
                    this.hue = hue;
                    this.life = 1;
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 3 + 1;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                }
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.life -= 0.02;
                }
                draw() {
                    ctx.globalAlpha = this.life;
                    ctx.fillStyle = `hsl(${this.hue}, 100%, 70%)`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            class Gene {
                constructor(data, strandIndex, geneIndex) {
                    this.data = data;
                    this.x = (strandIndex + 0.5) * 60;
                    this.y = geneIndex * 100;
                    this.w = 40;
                    this.h = 20 + data.weight * 60;
                    this.hue = typeColors[data.type] || 270;
                    this.glow = 0;
                    this.life = Math.random() * 100;
                }

                update() {
                    this.life += 0.01;
                    let targetGlow = this.data.intensity * 0.5;
                    if (this === mouse.hoverGene) {
                        targetGlow = 1;
                    } else if (mouse.hoverGene && this.data.source === mouse.hoverGene.data.source) {
                        targetGlow = 0.8;
                    }
                    this.glow += (targetGlow - this.glow) * 0.1;
                }

                draw() {
                    const yPos = this.y - scrollY;
                    if (yPos < -100 || yPos > height + 100) return;

                    const pulse = (Math.sin(this.life) + 1) / 2;
                    const lightness = 40 + pulse * 20;
                    
                    ctx.globalAlpha = 0.6 + pulse * 0.2;
                    ctx.fillStyle = `hsl(${this.hue}, 80%, ${lightness}%)`;
                    ctx.fillRect(this.x, yPos, this.w, this.h);

                    if (this.glow > 0.01) {
                        ctx.shadowColor = `hsl(${this.hue}, 100%, 60%)`;
                        ctx.shadowBlur = this.glow * 30;
                        ctx.globalAlpha = this.glow * 0.5;
                        ctx.fillStyle = `hsl(${this.hue}, 100%, 70%)`;
                        ctx.fillRect(this.x, yPos, this.w, this.h);
                        ctx.shadowBlur = 0;
                    }
                }
            }

            function init() {
                let strandCount = Math.ceil(width / 60);
                strands = [];
                for (let i = 0; i < strandCount; i++) {
                    let strand = [];
                    for (let j = 0; j < 50; j++) { // 50 genes per strand
                        const data = memoryData[Math.floor(Math.random() * memoryData.length)];
                        strand.push(new Gene(data, i, j));
                    }
                    strands.push(strand);
                }
            }

            function animate() {
                ctx.globalAlpha = 1;
                ctx.fillStyle = '#000205';
                ctx.fillRect(0, 0, width, height);

                // Ambient mutation
                if (Math.random() < 0.01) {
                    const rStrand = strands[Math.floor(Math.random() * strands.length)];
                    const rGene = rStrand[Math.floor(Math.random() * rStrand.length)];
                    rGene.data.type = Object.keys(typeColors)[Math.floor(Math.random() * Object.keys(typeColors).length)];
                    rGene.hue = typeColors[rGene.data.type];
                }

                strands.forEach(strand => {
                    strand.forEach(gene => {
                        gene.update();
                        gene.draw();
                    });
                });

                particles.forEach((p, i) => {
                    p.update();
                    p.draw();
                    if (p.life <= 0) particles.splice(i, 1);
                });

                requestAnimationFrame(animate);
            }

            window.addEventListener('resize', () => {
                width = canvas.width = window.innerWidth;
                height = canvas.height = window.innerHeight;
                init();
            });

            window.addEventListener('wheel', (e) => {
                scrollY += e.deltaY * 0.2;
            });

            canvas.addEventListener('mousemove', (e) => {
                mouse.x = e.clientX;
                mouse.y = e.clientY;
                let foundGene = null;
                for (const strand of strands) {
                    for (const gene of strand) {
                        const yPos = gene.y - scrollY;
                        if (mouse.x > gene.x && mouse.x < gene.x + gene.w &&
                            mouse.y > yPos && mouse.y < yPos + gene.h) {
                            foundGene = gene;
                            break;
                        }
                    }
                    if(foundGene) break;
                }
                mouse.hoverGene = foundGene;
            });

            canvas.addEventListener('click', () => {
                if (mouse.hoverGene) {
                    for (let i = 0; i < 50; i++) {
                        particles.push(new Particle(mouse.x, mouse.y, mouse.hoverGene.hue));
                    }
                }
            });

            init();
            animate();
        });
    </script>
</body>
</html>
